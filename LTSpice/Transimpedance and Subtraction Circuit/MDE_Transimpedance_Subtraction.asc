Version 4
SHEET 1 2508 680
WIRE -1232 -64 -1232 -112
WIRE -1168 -64 -1232 -64
WIRE -1088 -64 -1168 -64
WIRE -992 -64 -1088 -64
WIRE -640 -64 -640 -112
WIRE -576 -64 -640 -64
WIRE -496 -64 -576 -64
WIRE -400 -64 -496 -64
WIRE 144 -64 96 -64
WIRE 304 -64 224 -64
WIRE -1232 -32 -1232 -64
WIRE -1168 -32 -1168 -64
WIRE -1088 -32 -1088 -64
WIRE -992 -32 -992 -64
WIRE -640 -32 -640 -64
WIRE -576 -32 -576 -64
WIRE -496 -32 -496 -64
WIRE -400 -32 -400 -64
WIRE 528 32 464 32
WIRE 672 32 608 32
WIRE 96 48 96 -64
WIRE 96 48 -16 48
WIRE 144 48 96 48
WIRE 304 64 304 -64
WIRE 304 64 208 64
WIRE 400 64 304 64
WIRE -1232 80 -1232 32
WIRE -1168 80 -1168 48
WIRE -1168 80 -1232 80
WIRE -1088 80 -1088 32
WIRE -1088 80 -1168 80
WIRE -992 80 -992 48
WIRE -992 80 -1088 80
WIRE -640 80 -640 32
WIRE -576 80 -576 48
WIRE -576 80 -640 80
WIRE -496 80 -496 32
WIRE -496 80 -576 80
WIRE -400 80 -400 48
WIRE -400 80 -496 80
WIRE 144 80 96 80
WIRE -864 128 -864 80
WIRE -272 128 -272 80
WIRE 96 144 96 80
WIRE 400 160 400 144
WIRE 464 160 464 32
WIRE 464 160 400 160
WIRE 528 160 464 160
WIRE 144 176 96 176
WIRE 288 176 224 176
WIRE 304 176 288 176
WIRE 672 176 672 32
WIRE 672 176 592 176
WIRE 752 176 672 176
WIRE 496 192 400 192
WIRE 528 192 496 192
WIRE -1232 224 -1232 80
WIRE -1184 224 -1232 224
WIRE -640 224 -640 80
WIRE -592 224 -640 224
WIRE 400 224 400 192
WIRE 496 224 496 192
WIRE -864 240 -864 208
WIRE -272 240 -272 208
WIRE -1232 256 -1232 224
WIRE -1008 256 -1008 208
WIRE -864 256 -864 240
WIRE -640 256 -640 224
WIRE -416 256 -416 208
WIRE -272 256 -272 240
WIRE 96 288 96 176
WIRE 96 288 -16 288
WIRE 144 288 96 288
WIRE -1120 304 -1120 272
WIRE -1120 304 -1168 304
WIRE -1072 304 -1120 304
WIRE -928 304 -1072 304
WIRE -528 304 -528 272
WIRE -528 304 -576 304
WIRE -480 304 -528 304
WIRE -336 304 -480 304
WIRE 304 304 304 176
WIRE 304 304 208 304
WIRE 400 304 304 304
WIRE 144 320 96 320
WIRE 96 368 96 320
WIRE -1232 400 -1232 352
WIRE -1008 400 -1008 352
WIRE -864 400 -864 352
WIRE -640 400 -640 352
WIRE -416 400 -416 352
WIRE -272 400 -272 352
FLAG 96 368 0
FLAG 96 144 0
FLAG 160 32 V+
FLAG 160 272 V+
FLAG 560 144 V+
FLAG 160 96 V-
FLAG 160 336 V-
FLAG 560 208 V-
FLAG -32 464 0
FLAG -128 464 0
FLAG -128 384 V+
FLAG -32 384 V-
FLAG 304 -64 Vtd1
FLAG 288 176 Vtd2
FLAG -1232 -112 V+
FLAG -864 80 0
FLAG -640 -112 V+
FLAG -272 80 0
FLAG -1232 400 V-
FLAG -1008 400 V-
FLAG -864 400 V-
FLAG -640 400 V-
FLAG -416 400 V-
FLAG -272 400 V-
FLAG -1008 208 Isc1
FLAG -16 48 Isc1
FLAG -416 208 Isc2
FLAG -16 288 Isc2
FLAG -864 240 Vref1
FLAG -272 240 Vref2
FLAG 496 304 0
FLAG 752 176 Vout
FLAG -528 176 V+
FLAG -1120 176 V+
SYMBOL res 416 160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 20k
SYMBOL res 416 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 20k
SYMBOL res 512 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 512 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL res 240 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 20k
SYMBOL res 240 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 20k
SYMBOL voltage -128 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -32 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -5
SYMBOL res -880 112 R0
SYMATTR InstName Rref1
SYMATTR Value 20k
SYMBOL cap -1104 -32 R0
SYMATTR InstName C3
SYMATTR Value 0.65p
SYMBOL res -1008 -48 R0
SYMATTR InstName R9
SYMATTR Value 1G
SYMBOL current -1168 -32 R0
WINDOW 3 21 79 Left 2
WINDOW 123 23 -36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 10µ
SYMATTR InstName I1
SYMBOL diode -1216 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res -288 112 R0
SYMATTR InstName Rref2
SYMATTR Value 20k
SYMBOL cap -512 -32 R0
SYMATTR InstName C1
SYMATTR Value 0.65p
SYMBOL res -416 -48 R0
SYMATTR InstName R7
SYMATTR Value 1G
SYMBOL current -576 -32 R0
WINDOW 3 21 79 Left 2
WINDOW 123 23 -36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 10µ
SYMATTR InstName I2
SYMBOL diode -624 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL npn -1168 256 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn -1072 256 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL npn -928 256 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL npn -576 256 M0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL npn -480 256 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL npn -336 256 R0
SYMATTR InstName Q6
SYMATTR Value 2N3904
SYMBOL OpAmps\\ADA4898 176 80 R0
SYMATTR InstName U1
SYMBOL OpAmps\\ADA4898 176 320 R0
SYMATTR InstName U2
SYMBOL npn -1184 176 R0
SYMATTR InstName Q7
SYMATTR Value 2N3904
SYMBOL npn -592 176 R0
SYMATTR InstName Q8
SYMATTR Value 2N3904
SYMBOL OpAmps\\OP27 560 112 R0
SYMATTR InstName U3
TEXT 896 152 Left 2 ;Vtd1 = Vtd2 = - (Current Through the Photodiode)*(Resistance)
TEXT 896 -112 Left 2 ;Vout = (Vtd2 - Vtd1)\n \nNOTE: This only applies if R1 = R2 = R3 = R4\n \nFor subtraction with gain:\n \nSet R1 = R2 and R3 = R4\n \nEquation will be: Vout = (R4/R1) * (Vtd2 - Vtd1)
TEXT 896 184 Left 2 ;Setting Ref1/Ref2 equal to the resistance on the input of Vtd1 or Vtd2 will measure nearly\nidentically to each other. Quick way to verify that the signals are correct.
TEXT -1336 488 Left 2 !.tran 1s

Version 4
SHEET 1 2508 680
WIRE 144 -448 96 -448
WIRE 304 -448 224 -448
WIRE 160 -320 160 -352
WIRE 160 -224 160 -256
WIRE 96 -208 96 -448
WIRE 96 -208 -16 -208
WIRE 144 -208 96 -208
WIRE 304 -192 304 -448
WIRE 304 -192 208 -192
WIRE 400 -192 304 -192
WIRE 144 -176 80 -176
WIRE 160 -128 160 -160
WIRE 80 -112 80 -176
WIRE 528 -80 464 -80
WIRE 672 -80 608 -80
WIRE -1232 -64 -1232 -112
WIRE -1168 -64 -1232 -64
WIRE -1088 -64 -1168 -64
WIRE -992 -64 -1088 -64
WIRE -640 -64 -640 -112
WIRE -576 -64 -640 -64
WIRE -496 -64 -576 -64
WIRE -400 -64 -496 -64
WIRE -1232 -32 -1232 -64
WIRE -1168 -32 -1168 -64
WIRE -1088 -32 -1088 -64
WIRE -992 -32 -992 -64
WIRE -640 -32 -640 -64
WIRE -576 -32 -576 -64
WIRE -496 -32 -496 -64
WIRE -400 -32 -400 -64
WIRE 160 -32 160 -64
WIRE 400 -16 400 -192
WIRE 144 48 96 48
WIRE 288 48 224 48
WIRE 304 48 288 48
WIRE 560 48 560 16
WIRE -1232 80 -1232 32
WIRE -1168 80 -1168 48
WIRE -1168 80 -1232 80
WIRE -1088 80 -1088 32
WIRE -1088 80 -1168 80
WIRE -992 80 -992 48
WIRE -992 80 -1088 80
WIRE -640 80 -640 32
WIRE -576 80 -576 48
WIRE -576 80 -640 80
WIRE -496 80 -496 32
WIRE -496 80 -576 80
WIRE -400 80 -400 48
WIRE -400 80 -496 80
WIRE -864 128 -864 80
WIRE -272 128 -272 80
WIRE 560 144 560 112
WIRE 400 160 400 64
WIRE 464 160 464 -80
WIRE 464 160 400 160
WIRE 528 160 464 160
WIRE 160 176 160 144
WIRE 672 176 672 -80
WIRE 672 176 592 176
WIRE 752 176 672 176
WIRE 496 192 400 192
WIRE 528 192 496 192
WIRE -1232 224 -1232 80
WIRE -1184 224 -1232 224
WIRE -640 224 -640 80
WIRE -592 224 -640 224
WIRE 400 224 400 192
WIRE 496 224 496 192
WIRE -864 240 -864 208
WIRE -272 240 -272 208
WIRE 560 240 560 208
WIRE -1232 256 -1232 224
WIRE -1008 256 -1008 208
WIRE -864 256 -864 240
WIRE -640 256 -640 224
WIRE -416 256 -416 208
WIRE -272 256 -272 240
WIRE 160 272 160 240
WIRE 96 288 96 48
WIRE 96 288 -16 288
WIRE 144 288 96 288
WIRE -1120 304 -1120 272
WIRE -1120 304 -1168 304
WIRE -1072 304 -1120 304
WIRE -928 304 -1072 304
WIRE -528 304 -528 272
WIRE -528 304 -576 304
WIRE -480 304 -528 304
WIRE -336 304 -480 304
WIRE 304 304 304 48
WIRE 304 304 208 304
WIRE 400 304 304 304
WIRE 144 320 80 320
WIRE 560 336 560 304
WIRE 80 368 80 320
WIRE 160 368 160 336
WIRE -1232 400 -1232 352
WIRE -1008 400 -1008 352
WIRE -864 400 -864 352
WIRE -640 400 -640 352
WIRE -416 400 -416 352
WIRE -272 400 -272 352
WIRE 160 464 160 432
WIRE -112 496 -112 480
WIRE -112 496 -208 496
WIRE -16 496 -16 480
WIRE 80 496 -16 496
WIRE -208 528 -208 496
WIRE -112 528 -112 496
WIRE -16 528 -16 496
WIRE 80 528 80 496
WIRE -208 640 -208 592
WIRE -160 640 -208 640
WIRE -112 640 -112 608
WIRE -112 640 -160 640
WIRE -16 640 -16 608
WIRE 32 640 -16 640
WIRE 80 640 80 592
WIRE 80 640 32 640
WIRE -160 656 -160 640
WIRE 32 656 32 640
FLAG 80 368 0
FLAG 80 -112 0
FLAG 560 16 V+
FLAG 560 336 V-
FLAG -112 480 V+
FLAG -16 480 V-
FLAG 304 -448 Vtd1
FLAG 288 48 Vtd2
FLAG -1232 -112 V+
FLAG -864 80 0
FLAG -640 -112 V+
FLAG -272 80 0
FLAG -1232 400 V-
FLAG -1008 400 V-
FLAG -864 400 V-
FLAG -640 400 V-
FLAG -416 400 V-
FLAG -272 400 V-
FLAG -1008 208 Isc1
FLAG -16 -208 Isc1
FLAG -416 208 Isc2
FLAG -16 288 Isc2
FLAG -864 240 Vref1
FLAG -272 240 Vref2
FLAG 496 304 0
FLAG 752 176 Vout
FLAG -528 176 V+
FLAG -1120 176 V+
FLAG 32 656 0
FLAG -160 656 0
FLAG 160 -32 V-
FLAG 160 -352 V+
FLAG 160 144 V+
FLAG 160 464 V-
SYMBOL res 416 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 20k
SYMBOL res 416 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 20k
SYMBOL res 512 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 512 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL res 240 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 20k
SYMBOL res 240 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 20k
SYMBOL voltage -112 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -16 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -5
SYMBOL res -880 112 R0
SYMATTR InstName Rref1
SYMATTR Value 20k
SYMBOL cap -1104 -32 R0
SYMATTR InstName C3
SYMATTR Value 0.65p
SYMBOL res -1008 -48 R0
SYMATTR InstName R9
SYMATTR Value 1G
SYMBOL current -1168 -32 R0
WINDOW 3 21 79 Left 2
WINDOW 123 23 -36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 10µ
SYMATTR InstName I1
SYMBOL diode -1216 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res -288 112 R0
SYMATTR InstName Rref2
SYMATTR Value 20k
SYMBOL cap -512 -32 R0
SYMATTR InstName C1
SYMATTR Value 0.65p
SYMBOL res -416 -48 R0
SYMATTR InstName R7
SYMATTR Value 1G
SYMBOL current -576 -32 R0
WINDOW 3 21 79 Left 2
WINDOW 123 23 -36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 10µ
SYMATTR InstName I2
SYMBOL diode -624 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL npn -1168 256 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn -1072 256 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL npn -928 256 R0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL npn -576 256 M0
SYMATTR InstName Q7
SYMATTR Value 2N3904
SYMBOL npn -480 256 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL npn -336 256 R0
SYMATTR InstName Q6
SYMATTR Value 2N3904
SYMBOL OpAmps\\ADA4898 176 -176 R0
SYMATTR InstName U1
SYMBOL OpAmps\\ADA4898 176 320 R0
SYMATTR InstName U2
SYMBOL npn -1184 176 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL npn -592 176 R0
SYMATTR InstName Q8
SYMATTR Value 2N3904
SYMBOL OpAmps\\OP27 560 112 R0
SYMATTR InstName U3
SYMBOL cap -224 528 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL cap 64 528 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL cap 544 48 R0
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL cap 576 304 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap 176 -64 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap 144 -320 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL cap 144 176 R0
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL cap 176 432 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C10
SYMATTR Value 100n
TEXT 896 152 Left 2 ;Vtd1 = Vtd2 = - (Current Through the Photodiode)*(Resistance)
TEXT 896 -112 Left 2 ;Vout = (Vtd2 - Vtd1)\n \nNOTE: This only applies if R1 = R2 = R3 = R4\n \nFor subtraction with gain:\n \nSet R1 = R2 and R3 = R4\n \nEquation will be: Vout = (R4/R1) * (Vtd2 - Vtd1)
TEXT 896 184 Left 2 ;Setting Ref1/Ref2 equal to the resistance on the input of Vtd1 or Vtd2 will measure nearly\nidentically to each other. Quick way to verify that the signals are correct.
TEXT -1336 488 Left 2 !.tran 10
